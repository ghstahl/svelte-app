var app=function(){"use strict";function t(){}function e(t){for(var e,n,i=1,o=arguments.length;i<o;i++){n=arguments[i];for(e in n)t[e]=n[e]}return t}function n(t,e){e.appendChild(t)}function i(t,e,n){e.insertBefore(t,n)}function o(t){t.parentNode.removeChild(t)}function s(t){return document.createElement(t)}function c(t){return document.createTextNode(t)}function r(t,e,n){t.addEventListener(e,n,!1)}function a(t,e,n){t.removeEventListener(e,n,!1)}function u(){return Object.create(null)}function h(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function d(t,e){return t!==e||t&&"object"==typeof t||"function"==typeof t}function f(t,e,n,i,o){for(var s in e)if(n[s]){var c=i[s],r=o[s],a=e[s];if(a)for(var u=0;u<a.length;u+=1){var h=a[u];h.__calling||(h.__calling=!0,h.call(t,c,r),h.__calling=!1)}}}function l(t){for(;t&&t.length;)t.pop()()}function _(){}function p(t,e){function u(t){e.incrementCount()}function h(t){e.corsTest()}function d(t){e.corsTest2()}function f(t){e.fetchIdentity()}var l,_,p,m,y,v,b,k,T,C,S,x,A,O,N,w,j,E,I,q,z,J,G,L,P,$,B,F,H,D,K,M,Q,R,U=t.identity.oidc.access_token,V=t.identity.access_code,W=t.identity.oidc.access_token&&g(t,e);return{c:function(){l=s("h1"),_=c("Hello "),p=c(t.name),m=c("!"),y=c("\r\n"),v=s("p"),b=c("Count: "),k=c(t.count),T=c("\r\n"),(C=s("button")).textContent="+1",S=c("\r\n"),(x=s("button")).textContent="corsTest",A=c("\r\n"),O=s("p"),N=c("pet: "),w=c(t.pet),j=c("\r\n"),(E=s("button")).textContent="corsTest2",I=c("\r\n"),q=s("p"),z=c("corsTest2: "),J=c(t.corsTest2),G=c("\r\n"),(L=s("button")).textContent="fetchIdentity",P=c("\r\n"),$=s("p"),B=c("identity.oidc.access_token: "),F=c(U),H=c("\r\n"),D=s("p"),K=c("identity.access_code: "),M=c(V),Q=c("\r\n\r\n"),W&&W.c(),R=document.createComment(""),this.h()},h:function(){!function(t){!function(t,e,n){t.setAttribute(e,n)}(t,"svelte-4119247774","")}(l),r(C,"click",u),r(x,"click",h),r(E,"click",d),r(L,"click",f)},m:function(t,e){i(l,t,e),n(_,l),n(p,l),n(m,l),i(y,t,e),i(v,t,e),n(b,v),n(k,v),i(T,t,e),i(C,t,e),i(S,t,e),i(x,t,e),i(A,t,e),i(O,t,e),n(N,O),n(w,O),i(j,t,e),i(E,t,e),i(I,t,e),i(q,t,e),n(z,q),n(J,q),i(G,t,e),i(L,t,e),i(P,t,e),i($,t,e),n(B,$),n(F,$),i(H,t,e),i(D,t,e),n(K,D),n(M,D),i(Q,t,e),W&&W.m(t,e),i(R,t,e)},p:function(t,n){t.name&&(p.data=n.name),t.count&&(k.data=n.count),t.pet&&(w.data=n.pet),t.corsTest2&&(J.data=n.corsTest2),t.identity&&U!==(U=n.identity.oidc.access_token)&&(F.data=U),t.identity&&V!==(V=n.identity.access_code)&&(M.data=V),n.identity.oidc.access_token?W||((W=g(n,e)).c(),W.m(R.parentNode,R)):W&&(W.u(),W.d(),W=null)},u:function(){o(l),o(y),o(v),o(T),o(C),o(S),o(x),o(A),o(O),o(j),o(E),o(I),o(q),o(G),o(L),o(P),o($),o(H),o(D),o(Q),W&&W.u(),o(R)},d:function(){a(C,"click",u),a(x,"click",h),a(E,"click",d),a(L,"click",f),W&&W.d()}}}function g(t,e){function n(t){e.establishAuthenticatedSession()}function u(t){e.checkAuthenticatedSession()}var h,d,f;return{c:function(){(h=s("button")).textContent="establishAuthenticatedSession",d=c("\r\n"),(f=s("button")).textContent="checkAuthenticatedSession",this.h()},h:function(){r(h,"click",n),r(f,"click",u)},m:function(t,e){i(h,t,e),i(d,t,e),i(f,t,e)},u:function(){o(h),o(d),o(f)},d:function(){a(h,"click",n),a(f,"click",u)}}}function m(t){!function(t,e){t.options=e,t._observers={pre:u(),post:u()},t._handlers=u(),t._root=e._root||t,t._bind=e._bind}(this,t),this._state=e({user:{loggedIn:!1},pet:"",identity:{oidc:{access_token:null}},count:0,corsTest2:""},t.data),this._handlers.destroy=[_];var n=function(){localStorage.getItem("user")&&this.set({user:{loggedIn:!0}})}.bind(this);t._root?this._root._oncreate.push(n):this._oncreate=[n],this._fragment=p(this._state,this),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),l(this._oncreate))}e(m.prototype,{incrementCount:function(){var t=this.get();this.set({count:t.count+1})},fetchIdentity:function(){var t=this,e=this.get(),n=JSON.stringify({query:"query q($id: String!){identity(input: { id: $id }) {access_code oidc}}",variables:'{"id": "NOF"}',operationName:"q"});fetch("/api/graphql",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:n}).then(function(t){return t.json()}).then(function(n){console.log(n.data),t.set({identity:n.data.identity}),console.log(e)})},establishAuthenticatedSession:function(){var t=this.get();console.log(t);var e="https://pingo7identityserver4.azurewebsites.net/Account/EstablishAuthenticatedSession?accessToken="+t.identity.oidc.access_token;fetch(e,{credentials:"include",headers:{"Content-Type":"text/plain"},method:"GET"}).then(function(t){console.log(t)})},checkAuthenticatedSession:function(){var t=this.get();console.log(t);fetch("https://pingo7identityserver4.azurewebsites.net/Account/CheckAuthenticatedSession",{credentials:"include",method:"GET",headers:{"Content-Type":"text/plain"}}).then(function(t){return t.text()}).then(function(t){console.log(t)})},corsTest:function(){var t=this,e=(this.get(),JSON.stringify({name:"dog",description:"I am dog"}));fetch("https://pingo7api.azurewebsites.net/api2/OpenApi/Create",{method:"POST",headers:{"Content-Type":"application/json"},body:e}).then(function(t){return t.json()}).then(function(e){console.log(e),t.set({pet:JSON.stringify(e)})})},corsTest2:function(){var t=this;this.get();fetch("https://pingo7api.azurewebsites.net/api2/OpenApi/testing2",{method:"GET",headers:{"Content-Type":"text/plain"}}).then(function(t){return t.json()}).then(function(e){console.log(e),t.set({corsTest2:"api3:"+JSON.stringify(e)})})}},{destroy:h,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var i=0;i<n.length;i+=1)n[i].call(this,e)},observe:function(t,e,n){var i=n&&n.defer?this._observers.post:this._observers.pre;return(i[t]||(i[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=i[t].indexOf(e);~n&&i[t].splice(n,1)}}},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this._root._lock||(this._root._lock=!0,l(this._root._beforecreate),l(this._root._oncreate),l(this._root._aftercreate),this._root._lock=!1)},teardown:h,_recompute:t,_set:function(t){var n=this._state,i={},o=!1;for(var s in t)d(t[s],n[s])&&(i[s]=o=!0);o&&(this._state=e({},n,t),this._recompute(i,this._state),this._bind&&this._bind(i,this._state),f(this,this._observers.pre,i,this._state,n),this._fragment.p(i,this._state),f(this,this._observers.post,i,this._state,n))},_mount:function(t,e){this._fragment.m(t,e)},_unmount:function(){this._fragment.u()}});return new m({target:document.body,data:{name:"world2"}})}();
//# sourceMappingURL=bundle.js.map
